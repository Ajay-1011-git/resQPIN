{
    "project": {
        "name": "ResQPIN",
        "description": "Flutter + Firebase emergency response and tracking app. Backend is fully functional. Only the UI layer needs restyling.",
        "framework": "Flutter",
        "language": "Dart",
        "repo": "https://github.com/Ajay-1011-git/resQPIN.git"
    },
    "task": "Restyle every screen in lib/screens/ with a premium dark mode + liquid morphism design. Do NOT modify any service, model, or native code files. Only update the UI layer (widgets, styling, animations, theme).",
    "design_system": {
        "theme": "Dark mode with liquid morphism (frosted glass surfaces using BackdropFilter with ImageFilter.blur, flowing gradients, organic rounded shapes)",
        "font": "Inter (via google_fonts package)",
        "colors": {
            "background": {
                "primary": "#0A0A1A",
                "secondary": "#12122A",
                "gradient": "LinearGradient from #0A0A1A (top) to #12122A (bottom)"
            },
            "surfaces": {
                "card": "#1A1A2E at 60% opacity with backdrop blur",
                "card_border": "#2A2A4E"
            },
            "emergency_services": {
                "police": "#1565C0",
                "fire": "#E53935",
                "ambulance": "#43A047",
                "fisherman": "#00838F",
                "family": "#8E24AA"
            },
            "severity": {
                "low": "#4CAF50",
                "medium": "#FFA726",
                "high": "#EF5350"
            },
            "status": {
                "open": "#FF9800",
                "assigned": "#2196F3",
                "closed": "#4CAF50"
            },
            "text": {
                "primary": "#FFFFFF",
                "secondary": "#9E9E9E",
                "disabled": "#616161"
            }
        },
        "typography": {
            "headline_large": {
                "size": 32,
                "weight": 900,
                "letter_spacing": 3
            },
            "headline_medium": {
                "size": 24,
                "weight": 700,
                "letter_spacing": 1
            },
            "headline_small": {
                "size": 20,
                "weight": 600,
                "letter_spacing": 0.5
            },
            "body_large": {
                "size": 16,
                "weight": 400
            },
            "body_medium": {
                "size": 14,
                "weight": 400
            },
            "body_small": {
                "size": 12,
                "weight": 400
            },
            "button": {
                "size": 16,
                "weight": 700,
                "letter_spacing": 1.5,
                "transform": "uppercase"
            },
            "badge": {
                "size": 12,
                "weight": 600,
                "letter_spacing": 2
            }
        },
        "border_radius": {
            "cards": 20,
            "buttons": 14,
            "inputs": 14,
            "logo": 24,
            "bottom_panels": 24
        }
    },
    "animations": {
        "page_transitions": {
            "type": "fade + slide-up",
            "duration_ms": 300,
            "curve": "Curves.easeOutCubic"
        },
        "button_press": {
            "type": "AnimatedScale to 0.95 on tap-down, spring back on release",
            "duration_ms": 100
        },
        "card_list_stagger": {
            "type": "Staggered fade-in on scroll",
            "delay_between_items_ms": 100
        },
        "status_badge_pulse": {
            "type": "Gentle glow pulse, opacity 0.6 to 1.0",
            "duration_ms": 2000,
            "loop": true
        },
        "emergency_button_glow": {
            "type": "Colored glow pulse behind each emergency button icon",
            "duration_ms": 2000,
            "loop": true
        },
        "alert_banner_slide": {
            "type": "SlideTransition from top",
            "curve": "Curves.easeOutBack",
            "duration_ms": 500
        },
        "loading_skeleton": {
            "type": "Shimmer effect left-to-right (use shimmer package)"
        },
        "countdown_dialog": {
            "type": "Circular sweep animation with large pulsing countdown number"
        },
        "map_markers": {
            "type": "Bounce-in on appear"
        },
        "input_focus": {
            "type": "Border color tween from grey to blue on focus",
            "duration_ms": 200
        },
        "frosted_glass": {
            "type": "BackdropFilter with ImageFilter.blur(sigmaX: 15, sigmaY: 15) and semi-transparent overlay"
        }
    },
    "screens": [
        {
            "file": "lib/screens/login_screen.dart",
            "name": "Login Screen",
            "layout": "Full-screen centered form, no app bar",
            "elements": [
                {
                    "type": "logo_container",
                    "size": "100x100",
                    "style": "gradient #1565C0 to #0D47A1, rounded 24px, blue glow shadow (blur 20, offset 0,8)"
                },
                {
                    "type": "text",
                    "content": "ResQPIN",
                    "style": "headline_large, letter-spacing 3"
                },
                {
                    "type": "text",
                    "content": "Emergency Response System",
                    "style": "body_medium, grey"
                },
                {
                    "type": "input",
                    "hint": "Email Address",
                    "icon": "email_outlined",
                    "style": "frosted glass"
                },
                {
                    "type": "input",
                    "hint": "Password",
                    "icon": "lock_outline",
                    "suffix": "visibility toggle",
                    "style": "frosted glass"
                },
                {
                    "type": "button",
                    "label": "LOGIN",
                    "style": "full-width, height 56, primary blue, liquid ripple, loading spinner state"
                },
                {
                    "type": "link_row",
                    "text": "Don't have an account?",
                    "action_text": "Sign Up",
                    "navigates_to": "SignupScreen"
                }
            ],
            "animation": "Fade-in entire screen on load (1200ms)"
        },
        {
            "file": "lib/screens/signup_screen.dart",
            "name": "Signup Screen",
            "layout": "Scrollable form with app bar titled 'Create Account'",
            "elements": [
                {
                    "type": "role_selection",
                    "options": [
                        "PUBLIC (green, person icon)",
                        "OFFICER (blue, shield icon)"
                    ],
                    "style": "Two cards side-by-side, animated border glow on selection"
                },
                {
                    "type": "info_banner",
                    "condition": "OFFICER selected",
                    "content": "Officer accounts require official email domains",
                    "style": "blue tint container"
                },
                {
                    "type": "input",
                    "hint": "Full Name",
                    "icon": "person_outline"
                },
                {
                    "type": "row",
                    "children": [
                        {
                            "type": "input",
                            "hint": "Age",
                            "icon": "cake_outlined",
                            "keyboard": "number"
                        },
                        {
                            "type": "dropdown",
                            "options": [
                                "Male",
                                "Female",
                                "Other"
                            ],
                            "icon": "wc_outlined"
                        }
                    ]
                },
                {
                    "type": "input",
                    "hint": "Email Address",
                    "icon": "email_outlined"
                },
                {
                    "type": "input",
                    "hint": "Password",
                    "icon": "lock_outline",
                    "suffix": "visibility toggle"
                },
                {
                    "type": "input",
                    "hint": "Phone Number",
                    "icon": "phone_outlined",
                    "keyboard": "phone"
                },
                {
                    "type": "button",
                    "label": "CREATE ACCOUNT",
                    "style": "full-width, primary blue, loading spinner state"
                }
            ]
        },
        {
            "file": "lib/screens/public_dashboard.dart",
            "name": "Public Dashboard (MAIN SCREEN — most important)",
            "layout": "Scaffold with app bar + scrollable body",
            "app_bar": {
                "title": "ResQPIN",
                "actions": [
                    "Map icon -> HeatmapScreen",
                    "Logout icon -> logout + LoginScreen"
                ]
            },
            "elements": [
                {
                    "type": "conditional_banner",
                    "name": "Panic Recording Banner",
                    "condition": "_isPanicRecording == true",
                    "style": "red gradient, pulsing red dot animation, mic icon, 'RECORDING AUDIO' text, STOP button",
                    "animation": "slide-in from top"
                },
                {
                    "type": "conditional_banner_list",
                    "name": "Family Alert Banners",
                    "condition": "_familyAlerts not empty and not dismissed",
                    "style": "red gradient, warning icon, '[Name] needs help!', subcategory text, X dismiss button, full-width 'TRACK & NAVIGATE' button"
                },
                {
                    "type": "card",
                    "name": "User Info Card",
                    "style": "frosted glass with gradient #1A1A2E to #16213E",
                    "children": [
                        "Welcome, [username] (left)",
                        "6-char unique code badge in blue-tinted bordered pill (right)",
                        "Live clock (bottom, updates every second)"
                    ]
                },
                {
                    "type": "section",
                    "name": "Emergency Buttons Row",
                    "children": [
                        {
                            "label": "Police",
                            "icon": "local_police",
                            "color": "#1565C0",
                            "action": "_triggerSOS('POLICE')",
                            "long_press": "silent SOS"
                        },
                        {
                            "label": "Fire",
                            "icon": "local_fire_department",
                            "color": "#E53935",
                            "action": "_triggerSOS('FIRE')"
                        },
                        {
                            "label": "Ambulance",
                            "icon": "local_hospital",
                            "color": "#43A047",
                            "action": "_triggerSOS('AMBULANCE')"
                        }
                    ],
                    "style": "3 square frosted glass buttons, equal width, colored icon glow, scale animation on tap"
                },
                {
                    "type": "section",
                    "name": "Utility Buttons Row",
                    "children": [
                        {
                            "label": "Fisherman Mode",
                            "icon": "sailing",
                            "color": "#00838F",
                            "navigates_to": "FishermanModeScreen"
                        },
                        {
                            "label": "Family",
                            "icon": "family_restroom",
                            "color": "#8E24AA",
                            "navigates_to": "FamilyScreen"
                        }
                    ],
                    "style": "2 rectangular frosted glass buttons, side by side"
                },
                {
                    "type": "stream_list",
                    "name": "Recent Alerts",
                    "data_source": "StreamBuilder streamUserSOS",
                    "card_style": "Frosted glass card, colored type icon (left), type + subcategory (title), status + timestamp (subtitle), pulsing status badge (right)",
                    "animation": "staggered fade-in"
                }
            ]
        },
        {
            "file": "lib/screens/sos_category_screen.dart",
            "name": "SOS Category Selection",
            "layout": "Scaffold with app bar '[TYPE] Alert'",
            "elements": [
                {
                    "type": "header_row",
                    "children": [
                        "Type icon in colored container (32px)",
                        "Select Category title",
                        "What type of emergency? subtitle"
                    ]
                },
                {
                    "type": "severity_selector",
                    "options": [
                        "LOW (#4CAF50)",
                        "MEDIUM (#FFA726)",
                        "HIGH (#EF5350)"
                    ],
                    "style": "3 equal AnimatedContainer buttons, colored fill on selection, 200ms transition"
                },
                {
                    "type": "subcategory_list",
                    "style": "Frosted glass cards, colored dot indicator, text label, right arrow, InkWell ripple"
                }
            ]
        },
        {
            "file": "lib/screens/sos_confirmation_dialog.dart",
            "name": "SOS Confirmation Dialog",
            "layout": "Modal AlertDialog with blur background overlay",
            "elements": [
                {
                    "type": "header",
                    "icon": "warning_amber (orange)",
                    "text": "Confirm SOS"
                },
                {
                    "type": "text",
                    "content": "Sending [TYPE] alert + subcategory"
                },
                {
                    "type": "countdown_circle",
                    "size": 80,
                    "duration_seconds": 5,
                    "style": "Circular progress sweep (orange stroke), large countdown number (32px, bold, orange)"
                },
                {
                    "type": "text",
                    "content": "Alert will be sent automatically",
                    "style": "grey, small"
                },
                {
                    "type": "button",
                    "label": "CANCEL",
                    "style": "red text button"
                }
            ]
        },
        {
            "file": "lib/screens/sos_tracking_screen.dart",
            "name": "SOS Tracking Screen",
            "layout": "Map (flex 3, top) + frosted glass info panel (flex 2, bottom, rounded top 24px)",
            "map_markers": [
                {
                    "type": "sos_location",
                    "color": "red",
                    "label": "SOS pin"
                },
                {
                    "type": "officer",
                    "color": "blue",
                    "label": "Responding officer"
                },
                {
                    "type": "family",
                    "color": "green",
                    "label": "Family members tracking"
                }
            ],
            "info_panel_elements": [
                {
                    "type": "status_badge",
                    "states": [
                        "Waiting for officer (orange)",
                        "Officer responding (blue)",
                        "Resolved (green)"
                    ],
                    "animation": "pulsing dot"
                },
                {
                    "type": "alert_info",
                    "children": [
                        "Type + subcategory",
                        "DIGIPIN code"
                    ]
                },
                {
                    "type": "chips_row",
                    "children": [
                        "Distance chip (orange, place icon)",
                        "ETA chip (green, timer icon)"
                    ]
                },
                {
                    "type": "officer_details",
                    "condition": "status == ASSIGNED",
                    "children": [
                        "Shield icon",
                        "Officer name",
                        "Department",
                        "Phone"
                    ]
                },
                {
                    "type": "family_count",
                    "text": "[N] family member(s) tracking",
                    "color": "green"
                },
                {
                    "type": "resolved_banner",
                    "condition": "status == CLOSED",
                    "style": "green container, check icon, 'This alert has been resolved'"
                }
            ]
        },
        {
            "file": "lib/screens/officer_dashboard.dart",
            "name": "Officer Dashboard",
            "layout": "Scaffold with app bar + StreamBuilder body",
            "app_bar": {
                "title": "Officer Dashboard",
                "actions": [
                    "Map icon -> HeatmapScreen",
                    "Logout icon"
                ]
            },
            "elements": [
                {
                    "type": "card",
                    "name": "Officer Info Card",
                    "style": "frosted glass, 'On Duty,' label + name + department badge pill + live clock"
                },
                {
                    "type": "stream_list",
                    "name": "Active Alerts",
                    "data_source": "StreamBuilder for OPEN+ASSIGNED SOS matching department",
                    "card_style": "type icon, subcategory + severity badge, reporter name, DIGIPIN, timestamp, status badge",
                    "animation": "staggered fade-in"
                }
            ]
        },
        {
            "file": "lib/screens/alert_detail_screen.dart",
            "name": "Alert Detail Screen (Officer View)",
            "layout": "Map (flex 2) + scrollable detail panel (flex 3)",
            "map_features": [
                "Red marker (SOS)",
                "Blue marker (officer, live)",
                "Dashed polyline route",
                "Distance overlay"
            ],
            "detail_panel": [
                {
                    "type": "header",
                    "children": [
                        "Colored type icon",
                        "Type label",
                        "Status badge"
                    ]
                },
                {
                    "type": "detail_rows",
                    "fields": [
                        "Category",
                        "Severity",
                        "DIGIPIN",
                        "Reporter name",
                        "Date/time",
                        "Distance"
                    ]
                },
                {
                    "type": "button",
                    "label": "ATTEND THIS ALERT",
                    "condition": "status == OPEN",
                    "style": "full-width green, emergency icon"
                },
                {
                    "type": "button",
                    "label": "CLOSE ALERT",
                    "condition": "status == ASSIGNED by this officer",
                    "style": "full-width outlined orange"
                },
                {
                    "type": "text",
                    "condition": "status == ASSIGNED by another",
                    "content": "Being handled by [officer name]"
                }
            ]
        },
        {
            "file": "lib/screens/fisherman_mode_screen.dart",
            "name": "Fisherman Mode",
            "layout": "Scaffold with app bar 'Fisherman Mode' + scrollable body",
            "elements": [
                {
                    "type": "conditional_banner",
                    "name": "Storm Alert",
                    "condition": "weather alerts exist",
                    "style": "red/orange gradient, cyclone icon, alert title, description, animated shake"
                },
                {
                    "type": "grid",
                    "name": "Weather Dashboard",
                    "columns": 3,
                    "rows": 2,
                    "tiles": [
                        {
                            "label": "Temperature",
                            "icon": "thermostat",
                            "unit": "C"
                        },
                        {
                            "label": "Humidity",
                            "icon": "water_drop",
                            "unit": "%"
                        },
                        {
                            "label": "Wind Speed",
                            "icon": "air",
                            "unit": "km/h + direction"
                        },
                        {
                            "label": "Wave Height",
                            "icon": "waves",
                            "unit": "m"
                        },
                        {
                            "label": "Pressure",
                            "icon": "speed",
                            "unit": "hPa"
                        },
                        {
                            "label": "Sea Condition",
                            "icon": "sailing",
                            "unit": "text"
                        }
                    ],
                    "tile_style": "frosted glass, colored icon top, large bold value, small grey label"
                },
                {
                    "type": "text",
                    "content": "Last updated: [timestamp]"
                },
                {
                    "type": "button",
                    "label": "FISHERMAN SOS",
                    "style": "full-width teal, wave icon"
                }
            ]
        },
        {
            "file": "lib/screens/heatmap_screen.dart",
            "name": "Crime Heatmap",
            "layout": "Full-screen Google Map with overlay controls",
            "elements": [
                {
                    "type": "google_map",
                    "center": "India (22.5, 82)",
                    "zoom": 5,
                    "data": "Weighted colored circles over 100+ cities"
                },
                {
                    "type": "legend_overlay",
                    "position": "bottom-left",
                    "style": "frosted glass card, 6-tier color scale with crime count ranges"
                },
                {
                    "type": "fab",
                    "position": "top-right",
                    "action": "show data source info dialog"
                }
            ]
        },
        {
            "file": "lib/screens/family_screen.dart",
            "name": "Family Link Screen",
            "layout": "Scaffold with app bar 'Family Link'",
            "elements": [
                {
                    "type": "card",
                    "name": "My Code",
                    "style": "frosted glass, 'Your Code' label, large monospace blue text, 'Share this code' instruction"
                },
                {
                    "type": "input_row",
                    "hint": "Enter family member's code",
                    "button": "LINK"
                },
                {
                    "type": "list",
                    "name": "Linked Members",
                    "card_style": "purple person icon, member name (bold), member email (grey), red trash icon remove button with confirmation dialog"
                }
            ]
        },
        {
            "file": "lib/screens/family_tracking_screen.dart",
            "name": "Family Tracking Screen",
            "layout": "Map (flex 3) + frosted glass info panel (flex 2)",
            "map_markers": [
                {
                    "type": "sos_location",
                    "color": "red"
                },
                {
                    "type": "officer",
                    "color": "blue"
                },
                {
                    "type": "other_family",
                    "color": "green"
                }
            ],
            "info_panel_elements": [
                {
                    "type": "status_badge",
                    "animation": "pulsing"
                },
                {
                    "type": "alert_info",
                    "text": "[Name] needs help! + type + subcategory"
                },
                {
                    "type": "chips_row",
                    "children": [
                        "Distance",
                        "ETA"
                    ]
                },
                {
                    "type": "officer_details",
                    "condition": "assigned"
                },
                {
                    "type": "family_count"
                },
                {
                    "type": "button",
                    "label": "NAVIGATE (Google Maps)",
                    "style": "full-width blue #1565C0, height 52, navigation icon, launches google.navigation: intent"
                },
                {
                    "type": "button",
                    "label": "DISMISS ALERT",
                    "style": "full-width outlined orange, confirmation dialog, exits screen"
                },
                {
                    "type": "banner",
                    "text": "Your location is being shared",
                    "style": "green, location icon",
                    "condition": "_isTracking"
                },
                {
                    "type": "banner",
                    "text": "This alert has been resolved",
                    "style": "green, check icon",
                    "condition": "status == CLOSED"
                }
            ]
        }
    ],
    "new_files_to_create": [
        {
            "file": "lib/app_theme.dart",
            "description": "Centralized AppTheme class with all colors, gradients, typography, input decorations, and ThemeData"
        },
        {
            "file": "lib/widgets/frosted_glass_card.dart",
            "description": "Reusable frosted glass container using BackdropFilter"
        },
        {
            "file": "lib/widgets/emergency_button.dart",
            "description": "Animated emergency button with glow, scale, and ripple effects"
        },
        {
            "file": "lib/widgets/status_badge.dart",
            "description": "Pulsing status badge widget"
        },
        {
            "file": "lib/widgets/info_chip.dart",
            "description": "Distance/ETA chip widget"
        }
    ],
    "packages_allowed_to_add": [
        "google_fonts",
        "shimmer",
        "flutter_animate"
    ],
    "integration_rules": [
        "DO NOT modify any files in lib/services/ — backend is complete and working",
        "DO NOT modify any files in lib/models/ — data layer is complete",
        "DO NOT modify lib/constants.dart — color values must stay the same",
        "DO NOT modify lib/main.dart routing logic — navigation flow is complete",
        "DO NOT modify AndroidManifest.xml or MainActivity.kt — native code is complete",
        "DO NOT modify pubspec.yaml beyond adding allowed UI packages",
        "ONLY modify files in lib/screens/ and create new files in lib/widgets/ or lib/theme/",
        "KEEP all existing StreamBuilder, FutureBuilder, service calls, and Navigator calls exactly as they are",
        "PRESERVE all existing state management, initState, dispose, and callback logic"
    ],
    "expected_output": [
        "Restyled versions of all 12 screen files in lib/screens/",
        "New lib/app_theme.dart with centralized design tokens",
        "New lib/widgets/ folder with reusable styled components",
        "Updated pubspec.yaml with any new UI packages"
    ]
}